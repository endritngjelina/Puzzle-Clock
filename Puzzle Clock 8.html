<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puzzle Clock - Decode the Time</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4CAF50;
            --secondary: #2196F3;
            --accent: #FF9800;
            --dark: #1e3c72;
            --darker: #0f1c3c;
            --light: #2a5298;
            --success: #4CAF50;
            --error: #f44336;
            --warning: #FF9800;
            --card-bg: rgba(255, 255, 255, 0.08);
            --text: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.7);
            --border: rgba(255, 255, 255, 0.2);
            --border-radius: 16px;
            --transition: all 0.3s ease;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--darker), var(--dark), var(--light));
            min-height: 100vh;
            color: var(--text);
            overflow-x: hidden;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: slideDown 1s ease-out;
            position: relative;
        }

        .title {
            font-size: 2.8rem;
            font-weight: 800;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            margin-bottom: 10px;
            background: linear-gradient(to right, #4CAF50, #2196F3);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
        }

        .subtitle {
            font-size: 1.3rem;
            opacity: 0.8;
            margin-bottom: 20px;
            max-width: 700px;
            margin: 0 auto 25px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .difficulty-selector {
            display: flex;
            gap: 10px;
            background: var(--card-bg);
            padding: 8px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
        }

        .difficulty-btn {
            padding: 10px 20px;
            border: none;
            background: transparent;
            color: var(--text);
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            font-family: inherit;
            font-weight: 600;
            min-width: 100px;
        }

        .difficulty-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .difficulty-btn.active {
            background: var(--primary);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .utility-buttons {
            display: flex;
            gap: 10px;
        }

        .utility-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            font-family: inherit;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--card-bg);
            color: var(--text);
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
        }

        .utility-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .utility-btn.skip {
            background: rgba(255, 152, 0, 0.2);
            border-color: var(--warning);
        }

        .utility-btn.settings {
            background: rgba(33, 150, 243, 0.2);
            border-color: var(--secondary);
        }

        .puzzle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .puzzle-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            transition: var(--transition);
            animation: fadeInUp 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .puzzle-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .puzzle-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--primary);
            opacity: 0.7;
        }

        .puzzle-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--primary);
            text-align: center;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .binary-display {
            font-size: 1.8rem;
            letter-spacing: 4px;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .emoji-display {
            font-size: 3rem;
            text-align: center;
            margin: 20px 0;
            line-height: 1.2;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .color-blocks {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            min-height: 100px;
        }

        .color-block {
            width: 100%;
            aspect-ratio: 1/1;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: var(--transition);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            color: rgba(0, 0, 0, 0.8);
        }

        .color-block:hover {
            transform: scale(1.1);
            border-color: var(--primary);
        }

        .morse-display {
            font-size: 2rem;
            letter-spacing: 6px;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .roman-display {
            font-size: 2.2rem;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .math-display {
            font-size: 1.6rem;
            text-align: center;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            line-height: 1.4;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .decoder-section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
        }

        .decoder-title {
            font-size: 1.6rem;
            margin-bottom: 20px;
            text-align: center;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        .time-input-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .time-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .time-input {
            padding: 12px;
            font-size: 1.2rem;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            width: 80px;
            text-align: center;
            font-family: inherit;
            font-weight: bold;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        .decode-btn {
            padding: 12px 25px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: var(--transition);
            font-family: inherit;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 25px;
        }

        .decode-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin: 20px 0 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), #8BC34A);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .feedback {
            text-align: center;
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            min-height: 30px;
            padding: 10px;
            border-radius: 8px;
        }

        .success {
            background: rgba(76, 175, 80, 0.2);
            color: var(--success);
            border: 1px solid rgba(76, 175, 80, 0.5);
        }

        .error {
            background: rgba(244, 67, 54, 0.2);
            color: var(--error);
            border: 1px solid rgba(244, 67, 54, 0.5);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-label {
            opacity: 0.8;
            font-size: 0.95rem;
        }

        .hints-section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            margin-top: 20px;
        }

        .hints-toggle {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            margin-bottom: 15px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0 auto;
            font-weight: 600;
        }

        .hints-toggle:hover {
            background: #e68a00;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 152, 0, 0.4);
        }

        .hints-content {
            display: none;
            line-height: 1.6;
            opacity: 0.9;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            margin-top: 15px;
        }

        .hints-content.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .hint-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .hint-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeInUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .achievement {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            transform: translateX(400px);
            transition: transform 0.5s ease;
            z-index: 1000;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .achievement.show {
            transform: translateX(0);
        }

        .settings-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            background: var(--darker);
            z-index: 2000;
            padding: 30px;
            transform: translateX(100%);
            transition: transform 0.4s ease;
            overflow-y: auto;
            box-shadow: -5px 0 30px rgba(0,0,0,0.3);
        }

        .settings-panel.open {
            transform: translateX(0);
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .settings-title {
            font-size: 1.8rem;
            color: var(--primary);
        }

        .close-settings {
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .close-settings:hover {
            background: rgba(255,255,255,0.1);
        }

        .theme-selector {
            margin-bottom: 30px;
        }

        .theme-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .theme-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .theme-option {
            padding: 15px;
            border-radius: 10px;
            background: var(--card-bg);
            border: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .theme-option:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .theme-option.active {
            border-color: var(--primary);
        }

        .theme-preview {
            width: 100%;
            height: 80px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .theme-name {
            font-weight: 600;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1500;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
        }

        .overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .timer {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--card-bg);
            padding: 10px 15px;
            border-radius: 30px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid var(--border);
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2.2rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .difficulty-selector {
                width: 100%;
                justify-content: center;
            }
            
            .utility-buttons {
                width: 100%;
                justify-content: center;
            }
            
            .puzzle-grid {
                grid-template-columns: 1fr;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            .settings-panel {
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 1.8rem;
            }
            
            .binary-display, 
            .morse-display,
            .roman-display,
            .math-display,
            .emoji-display {
                font-size: 1.5rem;
            }
            
            .time-input {
                width: 70px;
                padding: 10px;
                font-size: 1.1rem;
            }
            
            .color-blocks {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .stat-value {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="timer">
        <i class="fas fa-clock"></i>
        <span id="timer-display">00:00:00</span>
    </div>
    
    <div class="container">
        <div class="header">
            <div class="title"><i class="fas fa-puzzle-piece"></i> PUZZLE CLOCK</div>
            <div class="subtitle">Decode the cryptic time formats to reveal the current time. Test your logic and pattern recognition skills!</div>
            
            <div class="controls">
                <div class="difficulty-selector">
                    <button class="difficulty-btn active" data-level="easy">
                        <i class="fas fa-star"></i> Easy
                    </button>
                    <button class="difficulty-btn" data-level="medium">
                        <i class="fas fa-star-half-alt"></i> Medium
                    </button>
                    <button class="difficulty-btn" data-level="hard">
                        <i class="fas fa-star"></i> Hard
                    </button>
                    <button class="difficulty-btn" data-level="expert">
                        <i class="fas fa-crown"></i> Expert
                    </button>
                </div>
                
                <div class="utility-buttons">
                    <button class="utility-btn skip" onclick="skipPuzzle()">
                        <i class="fas fa-forward"></i> Skip Puzzle
                    </button>
                    <button class="utility-btn settings" onclick="openSettings()">
                        <i class="fas fa-cog"></i> Settings
                    </button>
                </div>
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="streak">0</div>
                <div class="stat-label">Current Streak</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="accuracy">0%</div>
                <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalSolved">0</div>
                <div class="stat-label">Total Solved</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="difficulty">Easy</div>
                <div class="stat-label">Current Level</div>
            </div>
        </div>

        <div class="puzzle-grid">
            <!-- Binary Clock -->
            <div class="puzzle-card">
                <div class="puzzle-title">
                    <i class="fas fa-code"></i> Binary Time
                </div>
                <div class="binary-display" id="binary-time">000000 000000 000000</div>
                <div class="hint-text">
                    HH:MM:SS in 6-bit binary
                </div>
            </div>

            <!-- Emoji Clock -->
            <div class="puzzle-card">
                <div class="puzzle-title">
                    <i class="fas fa-smile"></i> Emoji Cipher
                </div>
                <div class="emoji-display" id="emoji-time">üîç üîç üîç üîç üîç üîç</div>
                <div class="hint-text">
                    Decode the emoji pattern
                </div>
            </div>

            <!-- Color Blocks -->
            <div class="puzzle-card">
                <div class="puzzle-title">
                    <i class="fas fa-palette"></i> Color Spectrum
                </div>
                <div class="color-blocks" id="color-blocks"></div>
                <div class="hint-text">
                    RGB values encode time digits
                </div>
            </div>

            <!-- Morse Code (Medium+) -->
            <div class="puzzle-card" id="morse-card">
                <div class="puzzle-title">
                    <i class="fas fa-wifi"></i> Morse Code
                </div>
                <div class="morse-display" id="morse-time">.---- ..--- ...--</div>
                <div class="hint-text">
                    Dots and dashes
                </div>
            </div>

            <!-- Roman Numerals (Hard+) -->
            <div class="puzzle-card" id="roman-card">
                <div class="puzzle-title">
                    <i class="fas fa-history"></i> Roman Numerals
                </div>
                <div class="roman-display" id="roman-time">XII : XXX : XLV</div>
                <div class="hint-text">
                    Ancient time keeping
                </div>
            </div>

            <!-- Mathematical Expression (Expert) -->
            <div class="puzzle-card" id="math-card">
                <div class="puzzle-title">
                    <i class="fas fa-calculator"></i> Mathematical Time
                </div>
                <div class="math-display" id="math-time">
                    H = 10 √ó 2 + 3<br>
                    M = 15 √ó 4 - 5<br>
                    S = 50 √∑ 2 + 10
                </div>
                <div class="hint-text">
                    Solve the equations
                </div>
            </div>
        </div>

        <!-- Decoder Section -->
        <div class="decoder-section">
            <div class="decoder-title">
                <i class="fas fa-unlock-alt"></i> Time Decoder
            </div>
            <div class="input-group">
                <div class="time-input-container">
                    <div class="time-label">Hours</div>
                    <input type="number" class="time-input" id="hour-input" placeholder="HH" min="0" max="23">
                </div>
                <div style="font-size: 1.8rem; margin-top: 25px;">:</div>
                <div class="time-input-container">
                    <div class="time-label">Minutes</div>
                    <input type="number" class="time-input" id="minute-input" placeholder="MM" min="0" max="59">
                </div>
                <div style="font-size: 1.8rem; margin-top: 25px;">:</div>
                <div class="time-input-container">
                    <div class="time-label">Seconds</div>
                    <input type="number" class="time-input" id="second-input" placeholder="SS" min="0" max="59">
                </div>
            </div>
            
            <button class="decode-btn" onclick="checkAnswer()">
                <i class="fas fa-key"></i> Decode Time
            </button>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
            <div class="feedback" id="feedback"></div>
        </div>

        <!-- Hints Section -->
        <div class="hints-section">
            <button class="hints-toggle" onclick="toggleHints()">
                <i class="fas fa-lightbulb"></i> Show Decoding Hints
            </button>
            <div class="hints-content" id="hints-content">
                <h3><i class="fas fa-graduation-cap"></i> Decoding Guide</h3>
                
                <div class="hint-item">
                    <p><strong><i class="fas fa-code"></i> Binary:</strong> Each digit represents powers of 2. Read left to right: 32, 16, 8, 4, 2, 1. Add the values where you see 1.</p>
                </div>
                
                <div class="hint-item">
                    <p><strong><i class="fas fa-smile"></i> Emoji:</strong> Each emoji represents a digit (0-9). The mapping changes daily. Today's mapping: 
                        <span id="emoji-mapping-hint"></span>
                    </p>
                </div>
                
                <div class="hint-item">
                    <p><strong><i class="fas fa-palette"></i> Colors:</strong> The color blocks represent digits 0-9. The position order is: Hour tens, Hour ones, Minute tens, Minute ones, Second tens, Second ones.</p>
                </div>
                
                <div class="hint-item">
                    <p><strong><i class="fas fa-wifi"></i> Morse:</strong> Dots (.) and dashes (-). Each sequence of dots and dashes represents a single digit. Common codes: 1=.----, 2=..---, 3=...--, etc.</p>
                </div>
                
                <div class="hint-item">
                    <p><strong><i class="fas fa-history"></i> Roman Numerals:</strong> I=1, V=5, X=10, L=50. Remember that IV=4, IX=9, XL=40, etc.</p>
                </div>
                
                <div class="hint-item">
                    <p><strong><i class="fas fa-calculator"></i> Math Equations:</strong> Solve each equation to get the hour, minute, and second values. Remember order of operations (PEMDAS).</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Achievement Notification -->
    <div class="achievement" id="achievement">
        <i class="fas fa-trophy"></i>
        <span id="achievement-text"></span>
    </div>
    
    <!-- Settings Panel -->
    <div class="overlay" id="settings-overlay"></div>
    
    <div class="settings-panel" id="settings-panel">
        <div class="settings-header">
            <div class="settings-title">Settings</div>
            <button class="close-settings" onclick="closeSettings()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="theme-selector">
            <div class="theme-title">Select Theme</div>
            <div class="theme-options">
                <div class="theme-option active" data-theme="default">
                    <div class="theme-preview" style="background: linear-gradient(135deg, #1e3c72, #2a5298);"></div>
                    <div class="theme-name">Default</div>
                </div>
                <div class="theme-option" data-theme="dark">
                    <div class="theme-preview" style="background: linear-gradient(135deg, #0f0f23, #1a1a2e);"></div>
                    <div class="theme-name">Dark Space</div>
                </div>
                <div class="theme-option" data-theme="ocean">
                    <div class="theme-preview" style="background: linear-gradient(135deg, #006064, #0097a7);"></div>
                    <div class="theme-name">Ocean</div>
                </div>
            </div>
        </div>
        
        <div class="theme-selector">
            <div class="theme-title">Sound Effects</div>
            <div style="display: flex; align-items: center; gap: 15px;">
                <label class="switch">
                    <input type="checkbox" id="sound-toggle" checked>
                    <span class="slider"></span>
                </label>
                <span>Enable sound effects</span>
            </div>
        </div>
        
        <div class="theme-selector">
            <div class="theme-title">Reset Progress</div>
            <button class="utility-btn" style="width: 100%;" onclick="resetProgress()">
                <i class="fas fa-trash-alt"></i> Reset All Data
            </button>
            <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">
                This will erase all your progress and stats.
            </div>
        </div>
    </div>

    <script>
        class PuzzleClock {
            constructor() {
                this.currentTime = new Date();
                this.difficulty = 'easy';
                this.stats = this.loadStats();
                this.emojiMap = this.generateDailyEmojiMap();
                this.attempts = 0;
                this.maxAttempts = 3;
                this.startTime = Date.now();
                this.timerInterval = null;
                this.timeTaken = 0;
                
                this.initializeEventListeners();
                this.updateDisplay();
                this.updateStats();
                this.startTimer();
                
                // Update every second
                setInterval(() => {
                    this.currentTime = new Date();
                    this.updateDisplay();
                }, 1000);
                
                // Auto-save stats every 30 seconds
                setInterval(() => this.saveStats(), 30000);
            }

            initializeEventListeners() {
                // Difficulty selector
                document.querySelectorAll('.difficulty-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.setDifficulty(e.target.dataset.level);
                    });
                });

                // Enter key support
                document.querySelectorAll('.time-input').forEach(input => {
                    input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') this.checkAnswer();
                    });
                    
                    // Auto-tab to next input
                    input.addEventListener('input', (e) => {
                        if (e.target.value.length >= 2 && e.target.nextElementSibling && e.target.nextElementSibling.classList.contains('time-input')) {
                            e.target.nextElementSibling.focus();
                        }
                    });
                });

                // Input validation
                document.getElementById('hour-input').addEventListener('input', (e) => {
                    if (e.target.value > 23) e.target.value = 23;
                });
                
                document.getElementById('minute-input').addEventListener('input', (e) => {
                    if (e.target.value > 59) e.target.value = 59;
                });
                
                document.getElementById('second-input').addEventListener('input', (e) => {
                    if (e.target.value > 59) e.target.value = 59;
                });
                
                // Theme selector
                document.querySelectorAll('.theme-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        document.querySelectorAll('.theme-option').forEach(o => o.classList.remove('active'));
                        e.currentTarget.classList.add('active');
                        const theme = e.currentTarget.dataset.theme;
                        this.applyTheme(theme);
                    });
                });
            }

            setDifficulty(level) {
                this.difficulty = level;
                this.attempts = 0;
                this.maxAttempts = level === 'expert' ? 1 : level === 'hard' ? 2 : 3;
                
                // Show/hide puzzle cards based on difficulty
                document.getElementById('morse-card').style.display = 
                    ['medium', 'hard', 'expert'].includes(level) ? 'block' : 'none';
                document.getElementById('roman-card').style.display = 
                    ['hard', 'expert'].includes(level) ? 'block' : 'none';
                document.getElementById('math-card').style.display = 
                    level === 'expert' ? 'block' : 'none';
                
                document.getElementById('difficulty').textContent = 
                    level.charAt(0).toUpperCase() + level.slice(1);
                
                this.updateDisplay();
                this.clearInputs();
                document.getElementById('feedback').textContent = '';
                document.getElementById('feedback').className = 'feedback';
                document.getElementById('progress-fill').style.width = '0%';
                this.startTime = Date.now();
                this.timeTaken = 0;
            }

            generateDailyEmojiMap() {
                // Generate consistent emoji mapping for the day
                const today = new Date();
                const dateStr = `${today.getFullYear()}${today.getMonth()}${today.getDate()}`;
                const seed = Array.from(dateStr).reduce((acc, char) => acc + char.charCodeAt(0), 0);
                
                const emojis = ['üåô', '‚≠ê', 'üåü', '‚ú®', 'üî•', 'üí´', 'üåà', 'üéØ', 'üé™', 'üé®',
                               'üçé', 'üçï', 'üöÄ', 'üèÜ', 'üéÆ', 'üéß', 'üì±', 'üí°', 'üîë', 'üéÅ'];
                
                // Use seeded shuffle for consistent daily mapping
                const shuffled = [...emojis];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(this.seededRandom(seed) * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                
                const map = {};
                for (let i = 0; i < 10; i++) {
                    map[i] = shuffled[i];
                }
                
                // Update hint section with today's mapping
                let mappingText = '';
                for (let i = 0; i < 10; i++) {
                    mappingText += `${i}: ${map[i]} `;
                }
                document.getElementById('emoji-mapping-hint').textContent = mappingText;
                
                return map;
            }

            seededRandom(seed) {
                // Simple seeded random function
                let x = Math.sin(seed++) * 10000;
                return x - Math.floor(x);
            }

            updateDisplay() {
                const h = this.currentTime.getHours();
                const m = this.currentTime.getMinutes();
                const s = this.currentTime.getSeconds();

                this.updateBinaryDisplay(h, m, s);
                this.updateEmojiDisplay(h, m, s);
                this.updateColorDisplay(h, m, s);
                
                if (['medium', 'hard', 'expert'].includes(this.difficulty)) {
                    this.updateMorseDisplay(h, m, s);
                }
                
                if (['hard', 'expert'].includes(this.difficulty)) {
                    this.updateRomanDisplay(h, m, s);
                }
                
                if (this.difficulty === 'expert') {
                    this.updateMathDisplay(h, m, s);
                }
            }

            updateBinaryDisplay(h, m, s) {
                const toBinary = (num) => num.toString(2).padStart(6, '0');
                const display = `${toBinary(h)} ${toBinary(m)} ${toBinary(s)}`;
                document.getElementById('binary-time').textContent = display;
            }

            updateEmojiDisplay(h, m, s) {
                const timeStr = `${h.toString().padStart(2, '0')}${m.toString().padStart(2, '0')}${s.toString().padStart(2, '0')}`;
                let emojiTime = '';
                
                for (let digit of timeStr) {
                    emojiTime += this.emojiMap[parseInt(digit)] + ' ';
                }
                
                document.getElementById('emoji-time').textContent = emojiTime.trim();
            }

            updateColorDisplay(h, m, s) {
                const container = document.getElementById('color-blocks');
                container.innerHTML = '';
                
                const timeDigits = [
                    Math.floor(h / 10), h % 10,
                    Math.floor(m / 10), m % 10,
                    Math.floor(s / 10), s % 10
                ];
                
                const colors = [
                    '#FF0000', '#00FF00', '#0000FF', '#FFFF00', '#FF00FF', '#00FFFF', 
                    '#FFA500', '#800080', '#FFC0CB', '#A52A2A'
                ];
                
                timeDigits.forEach(digit => {
                    const block = document.createElement('div');
                    block.className = 'color-block';
                    block.style.backgroundColor = colors[digit];
                    block.textContent = digit;
                    block.title = `Digit: ${digit}, Color: ${colors[digit]}`;
                    container.appendChild(block);
                });
            }

            updateMorseDisplay(h, m, s) {
                const morseMap = {
                    '0': '-----', '1': '.----', '2': '..---', '3': '...--', '4': '....-',
                    '5': '.....', '6': '-....', '7': '--...', '8': '---..', '9': '----.'
                };
                
                const timeStr = `${h.toString().padStart(2, '0')}${m.toString().padStart(2, '0')}${s.toString().padStart(2, '0')}`;
                let morseTime = '';
                
                for (let digit of timeStr) {
                    morseTime += morseMap[digit] + '  ';
                }
                
                document.getElementById('morse-time').textContent = morseTime.trim();
            }

            updateRomanDisplay(h, m, s) {
                const toRoman = (num) => {
                    if (num === 0) return 'N'; // Nulla for zero
                    
                    const romanNumerals = [
                        { value: 50, symbol: 'L' },
                        { value: 40, symbol: 'XL' },
                        { value: 10, symbol: 'X' },
                        { value: 9, symbol: 'IX' },
                        { value: 5, symbol: 'V' },
                        { value: 4, symbol: 'IV' },
                        { value: 1, symbol: 'I' }
                    ];
                    
                    let result = '';
                    
                    for (const numeral of romanNumerals) {
                        while (num >= numeral.value) {
                            result += numeral.symbol;
                            num -= numeral.value;
                        }
                    }
                    
                    return result;
                };
                
                const display = `${toRoman(h)} : ${toRoman(m)} : ${toRoman(s)}`;
                document.getElementById('roman-time').textContent = display;
            }

            updateMathDisplay(h, m, s) {
                const generateEquation = (target) => {
                    if (target === 0) return '0';
                    
                    const operations = [
                        () => {
                            const a = Math.floor(Math.random() * 10) + 1;
                            const b = target - a;
                            return b >= 0 ? `${a} + ${b}` : `${a} - ${Math.abs(b)}`;
                        },
                        () => {
                            const a = Math.floor(Math.random() * 9) + 2;
                            const b = Math.floor(target / a);
                            const remainder = target % a;
                            return remainder === 0 ? 
                                `${a} √ó ${b}` : 
                                `${a} √ó ${b} + ${remainder}`;
                        },
                        () => {
                            if (target > 10) {
                                const a = Math.floor(Math.random() * (target - 1)) + 1;
                                return `${target + a} - ${a}`;
                            }
                            return `${target} + 0`;
                        }
                    ];
                    
                    const operation = operations[Math.floor(Math.random() * operations.length)];
                    return operation();
                };
                
                const equations = [
                    `H = ${generateEquation(h)}`,
                    `M = ${generateEquation(m)}`,
                    `S = ${generateEquation(s)}`
                ];
                
                document.getElementById('math-time').innerHTML = equations.join('<br>');
            }

            checkAnswer() {
                const inputH = parseInt(document.getElementById('hour-input').value) || 0;
                const inputM = parseInt(document.getElementById('minute-input').value) || 0;
                const inputS = parseInt(document.getElementById('second-input').value) || 0;
                
                const actualH = this.currentTime.getHours();
                const actualM = this.currentTime.getMinutes();
                const actualS = this.currentTime.getSeconds();
                
                this.attempts++;
                
                const isCorrect = inputH === actualH && inputM === actualM && inputS === actualS;
                const feedback = document.getElementById('feedback');
                
                if (isCorrect) {
                    this.handleSuccess();
                } else {
                    this.handleError(actualH, actualM, actualS);
                }
                
                // Update progress bar
                const progress = Math.min((this.attempts / this.maxAttempts) * 100, 100);
                document.getElementById('progress-fill').style.width = `${progress}%`;
            }

            handleSuccess() {
                const feedback = document.getElementById('feedback');
                this.timeTaken = Math.floor((Date.now() - this.startTime) / 1000);
                
                feedback.innerHTML = `üéâ Perfect! The time was ${actualH.toString().padStart(2, '0')}:${actualM.toString().padStart(2, '0')}:${actualS.toString().padStart(2, '0')}. Solved in ${this.attempts} attempt(s) and ${this.timeTaken}s`;
                feedback.className = 'feedback success pulse';
                
                // Update stats
                this.stats.streak++;
                this.stats.totalSolved++;
                this.stats.totalAttempts += this.attempts;
                this.stats.bestTime = Math.min(this.stats.bestTime || Infinity, this.timeTaken);
                
                // Bonus points for difficulty and speed
                let points = 10;
                if (this.difficulty === 'medium') points = 20;
                else if (this.difficulty === 'hard') points = 35;
                else if (this.difficulty === 'expert') points = 50;
                
                if (this.attempts === 1) points *= 2; // Perfect bonus
                if (this.timeTaken <= 30) points += 10; // Speed bonus
                
                this.stats.totalPoints += points;
                
                this.showAchievement(`+${points} points! Streak: ${this.stats.streak}`);
                this.updateStats();
                this.resetForNext();
            }

            handleError(actualH, actualM, actualS) {
                const feedback = document.getElementById('feedback');
                this.stats.totalAttempts++;
                
                if (this.attempts >= this.maxAttempts) {
                    feedback.innerHTML = `‚ùå Time's up! The correct time was ${actualH.toString().padStart(2, '0')}:${actualM.toString().padStart(2, '0')}:${actualS.toString().padStart(2, '0')}`;
                    feedback.className = 'feedback error';
                    this.stats.streak = 0;
                    this.updateStats();
                    this.resetForNext();
                } else {
                    const remaining = this.maxAttempts - this.attempts;
                    feedback.innerHTML = `üîÑ Try again! ${remaining} attempt(s) remaining`;
                    feedback.className = 'feedback error';
                }
            }

            resetForNext() {
                setTimeout(() => {
                    this.clearInputs();
                    document.getElementById('feedback').textContent = '';
                    document.getElementById('feedback').className = 'feedback';
                    document.getElementById('progress-fill').style.width = '0%';
                    this.attempts = 0;
                    this.startTime = Date.now();
                    this.timeTaken = 0;
                    document.querySelector('.feedback').classList.remove('pulse');
                }, 3000);
            }

            clearInputs() {
                document.getElementById('hour-input').value = '';
                document.getElementById('minute-input').value = '';
                document.getElementById('second-input').value = '';
            }

            updateStats() {
                document.getElementById('streak').textContent = this.stats.streak;
                document.getElementById('totalSolved').textContent = this.stats.totalSolved;
                
                const accuracy = this.stats.totalAttempts > 0 
                    ? Math.round((this.stats.totalSolved / this.stats.totalAttempts) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = `${accuracy}%`;
                
                this.saveStats();
            }

            showAchievement(message) {
                const achievement = document.getElementById('achievement');
                const text = document.getElementById('achievement-text');
                text.textContent = message;
                achievement.classList.add('show');
                
                setTimeout(() => {
                    achievement.classList.remove('show');
                }, 3000);
            }

            loadStats() {
                const defaultStats = {
                    streak: 0,
                    totalSolved: 0,
                    totalAttempts: 0,
                    totalPoints: 0,
                    bestTime: null,
                    achievements: []
                };
                
                try {
                    const saved = JSON.parse(localStorage.getItem('puzzleClockStats'));
                    return saved || defaultStats;
                } catch {
                    return defaultStats;
                }
            }

            saveStats() {
                try {
                    localStorage.setItem('puzzleClockStats', JSON.stringify(this.stats));
                } catch (e) {
                    console.log('Stats saved in memory only');
                }
            }
            
            startTimer() {
                this.timerInterval = setInterval(() => {
                    this.timeTaken = Math.floor((Date.now() - this.startTime) / 1000);
                    const hours = Math.floor(this.timeTaken / 3600);
                    const minutes = Math.floor((this.timeTaken % 3600) / 60);
                    const seconds = this.timeTaken % 60;
                    
                    document.getElementById('timer-display').textContent = 
                        `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }, 1000);
            }
            
            applyTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('puzzleClockTheme', theme);
            }
            
            skipPuzzle() {
                this.resetForNext();
                this.stats.streak = 0;
                this.updateStats();
                
                const feedback = document.getElementById('feedback');
                feedback.innerHTML = `‚è© Puzzle skipped! Your streak has been reset.`;
                feedback.className = 'feedback error';
                
                setTimeout(() => {
                    feedback.textContent = '';
                    feedback.className = 'feedback';
                }, 3000);
            }
        }

        // Global functions for HTML onclick handlers
        function checkAnswer() {
            puzzleClock.checkAnswer();
        }

        function toggleHints() {
            const content = document.getElementById('hints-content');
            const button = document.querySelector('.hints-toggle');
            
            if (content.classList.contains('show')) {
                content.classList.remove('show');
                button.innerHTML = '<i class="fas fa-lightbulb"></i> Show Decoding Hints';
            } else {
                content.classList.add('show');
                button.innerHTML = '<i class="fas fa-lightbulb"></i> Hide Hints';
            }
        }
        
        function openSettings() {
            document.getElementById('settings-panel').classList.add('open');
            document.getElementById('settings-overlay').classList.add('active');
        }
        
        function closeSettings() {
            document.getElementById('settings-panel').classList.remove('open');
            document.getElementById('settings-overlay').classList.remove('active');
        }
        
        function skipPuzzle() {
            puzzleClock.skipPuzzle();
        }
        
        function resetProgress() {
            if (confirm('Are you sure you want to reset all your progress and stats?')) {
                localStorage.removeItem('puzzleClockStats');
                puzzleClock.stats = puzzleClock.loadStats();
                puzzleClock.updateStats();
                closeSettings();
                
                const feedback = document.getElementById('feedback');
                feedback.innerHTML = '‚ôªÔ∏è All progress has been reset!';
                feedback.className = 'feedback success';
                
                setTimeout(() => {
                    feedback.textContent = '';
                    feedback.className = 'feedback';
                }, 3000);
            }
        }

        // Initialize the puzzle clock when page loads
        let puzzleClock;
        document.addEventListener('DOMContentLoaded', () => {
            puzzleClock = new PuzzleClock();
            
            // Apply saved theme
            const savedTheme = localStorage.getItem('puzzleClockTheme') || 'default';
            puzzleClock.applyTheme(savedTheme);
            
            // Set the active theme button
            document.querySelectorAll('.theme-option').forEach(option => {
                if (option.dataset.theme === savedTheme) {
                    option.classList.add('active');
                } else {
                    option.classList.remove('active');
                }
            });
        });

        // Close settings when clicking outside
        document.getElementById('settings-overlay').addEventListener('click', closeSettings);
    </script>
</body>
</html>